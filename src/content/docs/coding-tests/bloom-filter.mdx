---
title: Bloom Filter
description: A Bloom filter is a space-efficient probabilistic data structure that is used to test whether an element is a member of a set.
---

布隆过滤器（Bloom Filter）是1970年由Burton Howard Bloom提出的一种空间效率很高的概率型数据结构，它用于判断一个元素是否在一个集合中。布隆过滤器可以非常快速地进行查找，并且只需要占用很小的内存空间，但这种高效率是以牺牲准确度为代价的：布隆过滤器可能会误报（False Positive），即错误地判断某个不在集合中的元素为存在于集合中，但它绝不会漏报（False Negative），即如果它判断元素不存在，那么这个元素确实不在集合中。

#### 原理简述：

1. **初始化**：创建一个长度为 `m` 的位数组（Bit Array），初始时所有位都设置为0，以及 `k` 个不同的哈希函数，这些哈希函数将任何输入映射到位数组的 `m` 个位置之一。
2. **添加元素**：当向布隆过滤器添加一个元素时，元素会被 `k` 个哈希函数分别哈希，产生 `k` 个数组位置索引。然后将这些位置上的位都设置为1。
3. **检查元素**：要检查一个元素是否可能在集合中，就用同样的 `k` 个哈希函数对该元素进行哈希，得到 `k` 个索引。如果这些索引对应的位值都是1，则认为该元素“可能存在”于集合中；如果任何一个位值为0，则元素一定“不在”集合中。

#### 假阳性（False Positives）：

布隆过滤器的一个关键特性是它可能会产生假阳性，即它可能会错误地判断一个不在集合中的元素为存在于集合中。这种情况发生的原因是多个元素的哈希值可能会映射到相同的位上，导致某个位上的值被设置为1。一旦一个位被设置为1，就没有办法知道是哪个元素导致的变化。

假阳性的概率受多个因素影响，包括位数组的大小 `m`、哈希函数的数量 `k`、以及添加到集合中的元素数量 `n`。通过调整这些参数，可以在空间效率和假阳性概率之间进行权衡。

#### 假阴性（False Negatives）：

布隆过滤器不会产生假阴性。如果布隆过滤器表示一个元素不在集合中，那么这个元素确实不在集合中。这是因为一旦一个位被设置为1，它就不会再变回0；所以，如果一个元素的所有哈希值对应的位都是1，那么这个元素在之前一定被添加过。

#### 应用场景：

布隆过滤器特别适用于那些不需要100%准确率、但对空间和时间效率有严格要求的场景，比如网络爬虫的URL去重、分布式系统中的数据同步、数据库查询优化等。在这些应用中，假阳性可以接受（可能会导致少量不必要的数据检索或计算），但假阴性不能接受，因为它会导致数据丢失。
